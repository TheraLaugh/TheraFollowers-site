<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة التحكم | TheraFollowers</title>
  <style>
    body {
      background-color: #0f0f0f;
      color: white;
      font-family: Tahoma, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    .fixed-header {
      background-color: gold;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .back-button {
      font-size: 24px;
      color: black;
      cursor: pointer;
      padding: 5px 15px;
      font-weight: bold;
    }

    .site-name {
      font-size: 20px;
      color: black;
      font-weight: bold;
    }

    main {
      padding: 30px;
    }

    h1 {
      color: gold;
      margin-bottom: 30px;
    }

    .section {
      background-color: #1a1a1a;
      border-left: 5px solid #00aaff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      max-width: 500px;
      margin: auto;
      text-align: right;
    }

    .section.gold {
      border-left-color: gold;
    }

    .section.blue {
      border-left-color: #00aaff;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #00aaff;
      background-color: #0a0a0a;
      color: white;
    }

    button {
      background-color: #00aaff;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
    }

    button:hover {
      background-color: #0099dd;
    }

    .gold button {
      background-color: gold;
      color: black;
    }

    .gold button:hover {
      background-color: #e6c200;
    }

    .info {
      font-size: 14px;
      color: #ccc;
      margin-top: 10px;
    }

    .account-list {
      font-size: 14px;
      color: red;
      margin-top: 10px;
      text-align: right;
    }

    .account-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #2a2a2a;
      padding: 6px 10px;
      margin: 5px 0;
      border-radius: 6px;
    }

    .account-item span {
      color: white;
    }

    .account-item button {
      background-color: red;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 10px;
      cursor: pointer;
      font-size: 12px;
    }

    .account-item button:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>

  <div class="fixed-header">
    <div class="back-button" onclick="goBack()">←</div>
    <div class="site-name">TheraFollowers</div>
  </div>

  <main>
    <h1>لوحة التحكم</h1>

    <!-- القسم الذهبي -->
    <div class="section gold">
      <label>سعر الخدمة الذهبية</label>
      <input type="number" id="goldPriceInput" placeholder="مثال: 1">
      <label>العملة</label>
      <input type="text" id="goldCurrencyInput" placeholder="مثال: $ أو ريال">
      <label>رسالة القسم الذهبي</label>
      <input type="text" id="goldMsgInput" placeholder="اكتب رسالة تظهر فوق الحسابات الذهبية">
      <label>قيمة انتشار عند متابعة حساب ذهبي</label>
      <input type="number" id="goldSpreadInput" placeholder="مثال: 5">
      <button onclick="saveGoldSettings()">💾 حفظ إعدادات الذهبي</button>
    </div>

    <div class="section gold">
      <label>رابط حساب ذهبي</label>
      <input type="text" id="goldInput" placeholder="https://www.instagram.com/username">
      <button onclick="addGold()">تأكيد الإضافة</button>
      <div class="account-list" id="goldList"></div>
    </div>

    <!-- القسم الأزرق -->
    <div class="section blue">
      <label>رسالة القسم الأزرق</label>
      <input type="text" id="blueMsgInput" placeholder="اكتب رسالة تظهر فوق الحسابات الزرقاء">
      <label>قيمة انتشار عند متابعة حساب أزرق</label>
      <input type="number" id="blueSpreadInput" placeholder="مثال: 1">
      <button onclick="saveBlueSettings()">💾 حفظ إعدادات الأزرق</button>
    </div>

    <div class="section blue">
      <label>رابط حساب أزرق</label>
      <input type="text" id="blueInput" placeholder="https://www.instagram.com/username">
      <button onclick="addBlue()">تأكيد الإضافة</button>
      <div class="account-list" id="blueList"></div>
    </div>

    <div class="section blue">
      <label>رابط حساب أزرق لمنع انتشاره</label>
      <input type="text" id="blockInput" placeholder="https://www.instagram.com/username">
      <button onclick="blockBlue()">منع الانتشار</button>
      <div class="account-list" id="blockedList"></div>
    </div>
  </main>
  <script>
  function goBack() {
    history.back();
  }

  function extractUsername(link) {
    try {
      const url = new URL(link);
      return url.pathname.replace("/", "").replace("@", "").trim();
    } catch {
      return null;
    }
  }

  function saveGoldSettings() {
    saveGoldPrice();
    const msg = document.getElementById("goldMsgInput").value;
    const spread = parseInt(document.getElementById("goldSpreadInput").value);
    localStorage.setItem("goldMessage", msg);
    localStorage.setItem("goldSpreadValue", spread);
    alert("✅ تم حفظ إعدادات القسم الذهبي");
  }

  function saveBlueSettings() {
    const msg = document.getElementById("blueMsgInput").value;
    const spread = parseInt(document.getElementById("blueSpreadInput").value);
    localStorage.setItem("blueMessage", msg);
    localStorage.setItem("blueSpreadValue", spread);
    alert("✅ تم حفظ إعدادات القسم الأزرق");
  }

  function saveGoldPrice() {
    const price = parseFloat(document.getElementById("goldPriceInput").value);
    const currency = document.getElementById("goldCurrencyInput").value.trim();
    if (!isNaN(price) && currency) {
      localStorage.setItem("goldPrice", price.toFixed(2));
      localStorage.setItem("goldCurrency", currency);
    }
  }

  function addGold() {
    const link = document.getElementById("goldInput").value.trim();
    const username = extractUsername(link);
    if (!username) return alert("❌ الرابط غير صالح");

    let gold = JSON.parse(localStorage.getItem("goldAccounts") || "[]");
    if (!gold.includes(username)) {
      gold.push(username);
      localStorage.setItem("goldAccounts", JSON.stringify(gold));
      renderGoldList();
      document.getElementById("goldInput").value = "";
    } else {
      alert("⚠️ الحساب مضاف مسبقًا");
    }
  }

  function addBlue() {
    const link = document.getElementById("blueInput").value.trim();
    const username = extractUsername(link);
    if (!username) return alert("❌ الرابط غير صالح");

    let blue = JSON.parse(localStorage.getItem("blueAccounts") || "[]");
    if (!blue.includes(username)) {
      blue.push(username);
      localStorage.setItem("blueAccounts", JSON.stringify(blue));
      renderBlueList();
      document.getElementById("blueInput").value = "";
    } else {
      alert("⚠️ الحساب مضاف مسبقًا");
    }
  }

  function blockBlue() {
    const link = document.getElementById("blockInput").value.trim();
    const username = extractUsername(link);
    if (!username) return alert("❌ الرابط غير صالح");

    let blocked = JSON.parse(localStorage.getItem("blockedBlueAccounts") || "[]");
    if (!blocked.includes(username)) {
      blocked.push(username);
      localStorage.setItem("blockedBlueAccounts", JSON.stringify(blocked));
      renderBlockedList();
      document.getElementById("blockInput").value = "";
    } else {
      alert("⚠️ الحساب مضاف مسبقًا إلى قائمة الحظر");
    }
  }

  function removeGold(username) {
    let gold = JSON.parse(localStorage.getItem("goldAccounts") || "[]");
    gold = gold.filter(u => u !== username);
    localStorage.setItem("goldAccounts", JSON.stringify(gold));
    renderGoldList();
  }

  function removeBlue(username) {
    let blue = JSON.parse(localStorage.getItem("blueAccounts") || "[]");
    blue = blue.filter(u => u !== username);
    localStorage.setItem("blueAccounts", JSON.stringify(blue));
    renderBlueList();
  }

  function removeBlocked(username) {
    let blocked = JSON.parse(localStorage.getItem("blockedBlueAccounts") || "[]");
    blocked = blocked.filter(u => u !== username);
    localStorage.setItem("blockedBlueAccounts", JSON.stringify(blocked));
    renderBlockedList();
  }

  function renderGoldList() {
    let gold = JSON.parse(localStorage.getItem("goldAccounts") || "[]");
    const container = document.getElementById("goldList");
    container.innerHTML = "الحسابات الذهبية الحالية:";
    gold.forEach(username => {
      const item = document.createElement("div");
      item.className = "account-item";
      item.innerHTML = `<span>@${username}</span><button onclick="removeGold('${username}')">❌ حذف</button>`;
      container.appendChild(item);
    });
  }

  function renderBlueList() {
    let blue = JSON.parse(localStorage.getItem("blueAccounts") || "[]");
    const container = document.getElementById("blueList");
    container.innerHTML = "الحسابات الزرقاء الحالية:";
    blue.forEach(username => {
      const item = document.createElement("div");
      item.className = "account-item";
      item.innerHTML = `<span>@${username}</span><button onclick="removeBlue('${username}')">❌ حذف</button>`;
      container.appendChild(item);
    });
  }

  function renderBlockedList() {
    let blocked = JSON.parse(localStorage.getItem("blockedBlueAccounts") || "[]");
    const container = document.getElementById("blockedList");
    container.innerHTML = "الحسابات التي تم منع انتشارها:";
    blocked.forEach(username => {
      const item = document.createElement("div");
      item.className = "account-item";
      item.innerHTML = `<span>@${username}</span><button onclick="removeBlocked('${username}')">❌ حذف</button>`;
      container.appendChild(item);
    });
  }

  window.onload = function () {
    renderGoldList();
    renderBlueList();
    renderBlockedList();
  };
</script>
</body>
</html>