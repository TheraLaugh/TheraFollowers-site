<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>قائمة الحسابات | shahin__rknldin</title>
  <style>
    body {
      background-color: #0f0f0f;
      color: white;
      font-family: Tahoma, sans-serif;
      margin: 0;
      padding: 0;
    }

    .fixed-header {
      background-color: #0077cc;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    .menu-button {
      font-size: 24px;
      color: white;
      cursor: pointer;
      padding: 5px 15px;
      font-weight: bold;
    }

    .site-name {
      font-size: 20px;
      color: white;
      font-weight: bold;
      text-align: center;
      flex-grow: 1;
    }

    .profile-pic {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
    }

    .side-menu {
      position: absolute;
      top: 60px;
      right: 10px;
      background-color: #222;
      border: 2px solid #0077cc;
      border-radius: 8px;
      padding: 10px;
      display: none;
      flex-direction: column;
      z-index: 1000;
      width: 160px;
    }

    .side-menu a {
      color: white;
      text-decoration: none;
      margin: 0;
      font-size: 14px;
      padding: 8px;
      border-bottom: 1px solid #0077cc;
    }

    .side-menu a:last-child {
      border-bottom: none;
    }

    main {
      padding: 20px;
    }

    h2 {
      color: gold;
      margin-top: 30px;
    }

    .blue-title {
      color: #00aaff;
      font-size: 20px;
      margin-top: 40px;
    }

    .message {
      font-size: 14px;
      color: #ccc;
      margin-bottom: 10px;
    }

    .gold-section {
      background-color: #222;
      border: 2px solid gold;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 30px;
    }

    .gold-accounts {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .gold-account {
      background-color: gold;
      color: black;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: bold;
    }

    .blue-account {
      background-color: #1a1a1a;
      border: 2px solid #333;
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.3s ease;
      position: relative;
    }

    .blue-account::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 6px;
      height: 100%;
      background-color: #00aaff;
      border-top-left-radius: 10px;
      border-bottom-left-radius: 10px;
    }

    .blue-account.expanded {
      transform: scale(1.05);
      background-color: #002244;
      border-color: #00aaff;
    }

    .account-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .account-pic {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid white;
    }

    .follow-button {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      background-color: #00aaff;
      color: white;
    }

    .official-follow {
      margin-top: 10px;
      text-align: center;
    }

    .official-follow a {
      background-color: #00aaff;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      display: inline-block;
    }
  </style>
</head>
<body>

  <div class="fixed-header">
    <div class="menu-button" onclick="toggleMenu()">≡</div>
    <div class="site-name">shahin__rknldin</div>
    <img src="" alt="صورة الملف الشخصي" class="profile-pic" id="profileImage">
    <div class="side-menu" id="sideMenu">
      <a href="login.html">تسجيل الدخول</a>
      <a href="services.html">الخدمات</a>
      <a href="javascript:history.back()">← رجوع</a>
    </div>
  </div>

  <main>
    <div class="gold-section">
      <h2>الحسابات الذهبية</h2>
      <div class="message" id="goldMessage"></div>
      <div class="gold-accounts" id="goldAccountsList"></div>
    </div>

    <div class="blue-title">الحسابات الزرقاء</div>
    <div class="message" id="blueMessage"></div>
    <div id="blueAccountsList"></div>
  </main>

  <script>
    function toggleMenu() {
      const menu = document.getElementById("sideMenu");
      menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    }

    function isLoggedInToInstagram() {
      return localStorage.getItem("instagramLoggedIn") === "true";
    }

    function followUser(username, element) {
      if (!isLoggedInToInstagram()) {
        alert("يجب عليك تسجيل الدخول إلى إنستقرام لإتمام عملية المتابعة");
        window.location.href = "https://www.instagram.com/accounts/login/";
        return;
      }

      element.classList.add("expanded");

      setTimeout(() => {
        const container = document.createElement("div");
        container.className = "official-follow";
        container.innerHTML = `<a href="https://www.instagram.com/${username}" target="_blank">متابعة</a>`;
        element.appendChild(container);

        const followed = confirm(`هل قمت بمتابعة @${username}؟`);
        if (followed) {
          markAsFollowed(username);
          renderAccounts();
        }
      }, 1000);
    }

    function markAsFollowed(username) {
      let followed = JSON.parse(localStorage.getItem("followedAccounts") || "[]");
      if (!followed.includes(username)) {
        followed.push(username);
        localStorage.setItem("followedAccounts", JSON.stringify(followed));
      }
    }

    function renderAccounts() {
      const gold = JSON.parse(localStorage.getItem("goldAccounts") || "[]");
      const blue = JSON.parse(localStorage.getItem("blueAccounts") || "[]");
      const blocked = JSON.parse(localStorage.getItem("blockedBlueAccounts") || "[]");
      const followed = JSON.parse(localStorage.getItem("followedAccounts") || "[]");
      const profilePics = JSON.parse(localStorage.getItem("accountImages") || "{}");

      const goldMsg = localStorage.getItem("goldMessage") || "";
      const blueMsg = localStorage.getItem("blueMessage") || "";

      document.getElementById("goldMessage").innerText = goldMsg;
      document.getElementById("blueMessage").innerText = blueMsg;

      const goldContainer = document.getElementById("goldAccountsList");
      const blueContainer = document.getElementById("blueAccountsList");

      goldContainer.innerHTML = "";
      blueContainer.innerHTML = "";

      gold.forEach(username => {
        if (!followed.includes(username)) {
          const item = document.createElement("div");
          item.className = "gold-account";
          item.innerText = `@${username}`;
          goldContainer.appendChild(item);
        }
      });

      blue.forEach(username => {
        if (!blocked.includes(username) && !followed.includes(username)) {
          const item = document.createElement("div");
          item.className = "blue-account";
          const imgSrc = profilePics[username] || "";
          item.innerHTML = `
            <div class="account-info">
              <img src="${imgSrc}" class="account-pic" alt="صورة الحساب">
              <span>@${username}</span>
            </div>
            <button class="follow-button" onclick="followUser('${username}', this.parentElement)">تابع</button>
          `;
          blueContainer.appendChild(item);
        }
      });
    }

    function loadProfileImage() {
      const imgUrl = localStorage.getItem("profileImageUrl");
      if (imgUrl) {
        document.getElementById("profileImage").src = imgUrl;
      }
    }

    window.onload = function () {
      loadProfileImage();
      renderAccounts();
    };
  </script>

</body>
</html>